# Acceso a datos del flujo (súper-práctico)

**https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com**

| ¿Qué quieres?                                    | Sintaxis                                 | Ejemplo                                    | Nota                                                                                                                                                                                                                                                                                                                                                                                                         |
| -------------------------------------------------- | ---------------------------------------- | ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Cuerpo de un**trigger**                      | `triggerBody()`                        | `triggerBody()?['AccountId']`            | Igual que `triggerOutputs()?['body']…`;`triggerOutputs()`también deja leer **headers** .[Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com)[D365 Demystified](https://d365demystified.com/2020/09/06/using-triggerbody-triggeroutput-to-read-cds-trigger-metadata-attributes-in-a-flow-power-automate/?utm_source=chatgpt.com) |
| **Outputs**de una acción                    | `body('Accion')`/`outputs('Accion')` | `body('Get_items')?['value']`            | `outputs()`da acceso a `headers`y `body`.[Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com)                                                                                                                                                                                                                                      |
| **Fila actual**en un `Apply to each`       | `item()`                               | `item()?['Name']`                        | Dentro del bucle `Apply to each`.[Microsoft Learn](https://learn.microsoft.com/en-us/power-automate/apply-to-each?utm_source=chatgpt.com)[Ellis Karim&#39;s Blog](https://elliskarim.com/2021/07/14/item-v-itemsapply_to_each/?utm_source=chatgpt.com)                                                                                                                                                           |
| **Fila del bucle X**(desde fuera/otro nivel) | `items('NombreDelBucle')`              | `items('Apply_to_each')?['ReceiverRFC']` | Equivale a `item()`dentro del bucle.[Ellis Karim&#39;s Blog](https://elliskarim.com/2021/07/14/item-v-itemsapply_to_each/?utm_source=chatgpt.com)                                                                                                                                                                                                                                                             |
| **Variables**                                | `variables('nombre')`                  | `variables('str_nombre')`                | Lee el valor actual.[Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com)                                                                                                                                                                                                                                                                 |
| **Parámetros**del flujo/solution            | `parameters('p')`                      | `parameters('Ambiente')`                 | Muy útil con Solutions/EV.[Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com)                                                                                                                                                                                                                                                          |
| **Resultado de un Scope/Until/ForEach**      | `result('ScopeName')`                  | `result('Scope_Main')`                   | Devuelve inputs/outputs de las acciones internas.[Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/expression-functions-reference?utm_source=chatgpt.com)                                                                                                                                                                                                                                    |

> Consejo: camino “tipo ruta” también sirve, p. ej. `triggerOutputs()?['body/Customer/Name']`. [D365 Demystified](https://d365demystified.com/tag/triggeroutputs/?utm_source=chatgpt.com)
>



# Acceso a datos de acciones: comparativa rápida

| ¿Qué quieres?                            | Sintaxis                                               | Ejemplo (acción llamada**HTTP_SendGrid_SendMail** )            | Notas/uso recomendado                                                                                                                                  |
| ------------------------------------------ | ------------------------------------------------------ | --------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Objeto completo**de una acción    | `actions('Accion')`                                  | `actions('HTTP_SendGrid_SendMail')`                                 | Devuelve un objeto con `inputs`,`outputs`,`startTime`,`endTime`,`trackingId`, etc. Útil para inspección avanzada.                          |
| **Outputs**(cuerpo+headers+status)   | `actions('Accion').outputs`                          | `actions('HTTP_SendGrid_SendMail').outputs`                         | Equivalente a `outputs('HTTP_SendGrid_SendMail')`. Con**punto**navegas propiedades, pero no hay “safe navigation” (`?`).                   |
| **Body**del output                   | `actions('Accion').outputs.body`                     | `actions('HTTP_SendGrid_SendMail').outputs.body`                    | Equivale a `body('HTTP_SendGrid_SendMail')`. Si el body pudiera ser nulo, prefiere notación con corchetes y `?`(ver fila de abajo).               |
| **Propiedad dentro del body**        | `actions('Accion').outputs.body.<prop>`              | `actions('Get_items').outputs.body.value`                           | Para keys**sin**guiones/espacios. Si la propiedad tiene guiones o puede ser nula, usa corchetes:`actions('X')?['outputs']?['body']?['value']`. |
| **Header específico**               | `actions('Accion').outputs.headers['Nombre-Header']` | `actions('HTTP_SendGrid_SendMail').outputs.headers['Content-Type']` | Para headers con guiones**debes**usar `['…']`. Con “safe navigation”:`actions('X')?['outputs']?['headers']?['Content-Type']`.             |
| **Status code**                      | `actions('Accion').outputs.statusCode`               | `actions('HTTP_SendGrid_SendMail').outputs.statusCode`              | Muy útil en condiciones o scopes de error.                                                                                                            |
| **Equivalente compacto (solo body)** | `body('Accion')`                                     | `body('HTTP_SendGrid_SendMail')?['value']`                          | Más breve para leer el**body** . Soporta `?`con corchetes.                                                                                    |
| **Equivalente genérico (outputs)**  | `outputs('Accion')`                                  | `outputs('HTTP_SendGrid_SendMail')?['headers']?['Content-Type']`    | Versátil y**seguro**con `?`+corchetes; preferible cuando puede haber nulos.                                                                   |

## Ejemplos listos para pegar

* **Propiedad de body (sin nulos)**
  <pre class="overflow-visible!" data-start="2192" data-end="2243"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>actions</span><span>('Get_items')</span><span>.outputs</span><span>.body</span><span>.value</span><span>
  </span></span></code></div></div></pre>
* **Propiedad de body (defensivo con nulos)**
  <pre class="overflow-visible!" data-start="2294" data-end="2357"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>actions</span><span>('Get_items')?</span><span>['outputs'</span><span>]?</span><span>['body'</span><span>]?</span><span>['value'</span><span>]
  </span></span></code></div></div></pre>
* **Header con guiones (defensivo)**
  <pre class="overflow-visible!" data-start="2399" data-end="2472"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>actions</span><span>('HTTP_Call')?</span><span>['outputs'</span><span>]?</span><span>['headers'</span><span>]?</span><span>['Content-Type'</span><span>]
  </span></span></code></div></div></pre>
* **Status code para condición**
  <pre class="overflow-visible!" data-start="2510" data-end="2574"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>equals</span><span>(actions(</span><span>'HTTP_Call'</span><span>).outputs.statusCode, </span><span>200</span><span>)
  </span></span></code></div></div></pre>
* **Equivalente con `outputs()` (recomendado si puede ser nulo)**
  <pre class="overflow-visible!" data-start="2645" data-end="2705"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>outputs</span><span>('HTTP_Call')?</span><span>['headers'</span><span>]?</span><span>['Retry-After'</span><span>]
  </span></span></code></div></div></pre>
* **Solo body con `body()`**
  <pre class="overflow-visible!" data-start="2739" data-end="2791"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><span class="" data-state="closed"></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>body</span><span>(</span><span>'Parse_JSON'</span><span>)?</span><span>['Customer'</span><span>]?</span><span>['Name'</span><span>]
  </span></span></code></div></div></pre>

## ¿Cuándo usar `actions()` vs `outputs()` / `body()`?

* Usa **`actions()`** cuando necesites **más metadatos** de la acción (tiempos, trackingId, inputs/outputs completos) o te resulte más legible encadenar con  **puntos** .
* Usa **`outputs()` / `body()`** cuando quieras expresiones **más cortas** y, sobre todo, cuando necesites **“safe navigation”** con `?` y **corchetes** para evitar errores por valores nulos o keys con guiones/espacios.

> ⚠️ Con la notación de **puntos** (`.`) no puedes poner `?` entre segmentos. Si hay riesgo de `null`, cambia a **corchetes** con `?`:
>
> `actions('A')?['outputs']?['body']?['prop']`
>
